<%= render :partial => 'spree/shared/error_messages', :locals => { :target => @variant } %>

<%= form_for [:admin, @product, @variant] do |f| %>
  <fieldset data-hook="admin_variant_new_form">
    <legend align="center"><%= Spree.t(:new_variant) %></legend>
    <%= render :partial => 'form', :locals => { :f => f } %>
    <%= render :partial => 'spree/admin/shared/new_resource_links' %>
  </fieldset>
<% end %>

<script>
	var product = "<%= @product.sku %>";
	var option_1 = '';
	var option_2 = '';

	function AddReference(opt1,opt2){
		var opt = product.concat(' ').concat(opt1.substring(0, 3).concat(' ').concat(opt2.substring(0, 3)));
	    $('input#variant_sku').val(opt.toUpperCase());
	}

	$("div.field:first-child select#variant_option_value_ids").change(function(){
	    option_1 = $("div.field:first-child select#variant_option_value_ids option:selected").text();  
	    AddReference(option_1, option_2);
	});

	$("div.field:nth-child(2) select#variant_option_value_ids").change(function(){
	    option_2 = $("div.field:nth-child(2) select#variant_option_value_ids option:selected").text();
	    AddReference(option_1, option_2);
	});

</script>